<!-- BEGIN_TF_DOCS -->
## Requirements

No requirements.

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | n/a |
| <a name="provider_random"></a> [random](#provider\_random) | n/a |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_const"></a> [const](#module\_const) | github.com/amilevskiy/const | v0.1.11 |

## Resources

| Name | Type |
|------|------|
| [aws_iam_instance_profile.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_instance_profile) | resource |
| [aws_iam_role.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role) | resource |
| [aws_iam_role_policy_attachment.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment) | resource |
| [aws_instance.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance) | resource |
| [aws_key_pair.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/key_pair) | resource |
| [aws_security_group.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group) | resource |
| [aws_security_group_rule.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule) | resource |
| [aws_spot_instance_request.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/spot_instance_request) | resource |
| [random_shuffle.this](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/shuffle) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_ec2_price"></a> [ec2\_price](#input\_ec2\_price) | The map of on-demand prices. | `map(number)` | <pre>{<br>  "c3.2xlarge": 0.516,<br>  "c3.4xlarge": 1.032,<br>  "c3.8xlarge": 2.064,<br>  "c3.large": 0.129,<br>  "c3.xlarge": 0.258,<br>  "c4.2xlarge": 0.454,<br>  "c4.4xlarge": 0.909,<br>  "c4.8xlarge": 1.817,<br>  "c4.large": 0.114,<br>  "c4.xlarge": 0.227,<br>  "c5.18xlarge": 3.492,<br>  "c5.2xlarge": 0.388,<br>  "c5.4xlarge": 0.776,<br>  "c5.9xlarge": 1.746,<br>  "c5.large": 0.097,<br>  "c5.xlarge": 0.194,<br>  "c5d.18xlarge": 3.996,<br>  "c5d.2xlarge": 0.444,<br>  "c5d.4xlarge": 0.888,<br>  "c5d.9xlarge": 1.998,<br>  "c5d.large": 0.111,<br>  "c5d.xlarge": 0.222,<br>  "c5n.18xlarge": 4.428,<br>  "c5n.2xlarge": 0.492,<br>  "c5n.4xlarge": 0.984,<br>  "c5n.9xlarge": 2.214,<br>  "c5n.large": 0.123,<br>  "c5n.xlarge": 0.246,<br>  "d2.2xlarge": 1.588,<br>  "d2.4xlarge": 3.176,<br>  "d2.8xlarge": 6.352,<br>  "d2.xlarge": 0.794,<br>  "g2.2xlarge": 0.772,<br>  "g2.8xlarge": 3.088,<br>  "g3.16xlarge": 5.7,<br>  "g3.4xlarge": 1.425,<br>  "g3.8xlarge": 2.85,<br>  "g3s.xlarge": 0.938,<br>  "i2.2xlarge": 2.026,<br>  "i2.4xlarge": 4.051,<br>  "i2.8xlarge": 8.102,<br>  "i2.xlarge": 1.013,<br>  "i3.16xlarge": 5.952,<br>  "i3.2xlarge": 0.744,<br>  "i3.4xlarge": 1.488,<br>  "i3.8xlarge": 2.976,<br>  "i3.large": 0.186,<br>  "i3.metal": 5.952,<br>  "i3.xlarge": 0.372,<br>  "i3en.12xlarge": 6.48,<br>  "i3en.24xlarge": 12.96,<br>  "i3en.2xlarge": 1.08,<br>  "i3en.3xlarge": 1.62,<br>  "i3en.6xlarge": 3.24,<br>  "i3en.large": 0.27,<br>  "i3en.metal": 12.96,<br>  "i3en.xlarge": 0.54,<br>  "m3.2xlarge": 0.632,<br>  "m3.large": 0.158,<br>  "m3.medium": 0.079,<br>  "m3.xlarge": 0.315,<br>  "m4.10xlarge": 2.4,<br>  "m4.16xlarge": 3.84,<br>  "m4.2xlarge": 0.48,<br>  "m4.4xlarge": 0.96,<br>  "m4.large": 0.12,<br>  "m4.xlarge": 0.24,<br>  "m5.12xlarge": 2.76,<br>  "m5.24xlarge": 5.52,<br>  "m5.2xlarge": 0.46,<br>  "m5.4xlarge": 0.92,<br>  "m5.large": 0.115,<br>  "m5.metal": 5.52,<br>  "m5.xlarge": 0.23,<br>  "m5a.12xlarge": 2.496,<br>  "m5a.24xlarge": 4.992,<br>  "m5a.2xlarge": 0.416,<br>  "m5a.4xlarge": 0.832,<br>  "m5a.large": 0.104,<br>  "m5a.xlarge": 0.208,<br>  "m5d.12xlarge": 3.264,<br>  "m5d.24xlarge": 6.528,<br>  "m5d.2xlarge": 0.544,<br>  "m5d.4xlarge": 1.088,<br>  "m5d.large": 0.136,<br>  "m5d.metal": 6.528,<br>  "m5d.xlarge": 0.272,<br>  "p2.16xlarge": 21.216,<br>  "p2.8xlarge": 10.608,<br>  "p2.xlarge": 1.326,<br>  "p3.16xlarge": 30.584,<br>  "p3.2xlarge": 3.823,<br>  "p3.8xlarge": 15.292,<br>  "r3.2xlarge": 0.8,<br>  "r3.4xlarge": 1.6,<br>  "r3.8xlarge": 3.201,<br>  "r3.large": 0.2,<br>  "r3.xlarge": 0.4,<br>  "r4.16xlarge": 5.1216,<br>  "r4.2xlarge": 0.6402,<br>  "r4.4xlarge": 1.2804,<br>  "r4.8xlarge": 2.5608,<br>  "r4.large": 0.16005,<br>  "r4.xlarge": 0.3201,<br>  "r5.12xlarge": 3.648,<br>  "r5.24xlarge": 7.296,<br>  "r5.2xlarge": 0.608,<br>  "r5.4xlarge": 1.216,<br>  "r5.large": 0.152,<br>  "r5.metal": 7.296,<br>  "r5.xlarge": 0.304,<br>  "r5a.12xlarge": 3.288,<br>  "r5a.24xlarge": 6.576,<br>  "r5a.2xlarge": 0.548,<br>  "r5a.4xlarge": 1.096,<br>  "r5a.large": 0.137,<br>  "r5a.xlarge": 0.274,<br>  "r5d.12xlarge": 4.152,<br>  "r5d.24xlarge": 8.304,<br>  "r5d.2xlarge": 0.692,<br>  "r5d.4xlarge": 1.384,<br>  "r5d.large": 0.173,<br>  "r5d.metal": 8.304,<br>  "r5d.xlarge": 0.346,<br>  "t2.2xlarge": 0.4288,<br>  "t2.large": 0.1072,<br>  "t2.medium": 0.0536,<br>  "t2.micro": 0.0134,<br>  "t2.nano": 0.0067,<br>  "t2.small": 0.0268,<br>  "t2.xlarge": 0.2144,<br>  "t3.2xlarge": 0.384,<br>  "t3.large": 0.096,<br>  "t3.medium": 0.048,<br>  "t3.micro": 0.012,<br>  "t3.nano": 0.006,<br>  "t3.small": 0.024,<br>  "t3.xlarge": 0.192,<br>  "x1.16xlarge": 9.337,<br>  "x1.32xlarge": 18.674,<br>  "x1e.16xlarge": 18.672,<br>  "x1e.2xlarge": 2.334,<br>  "x1e.32xlarge": 37.344,<br>  "x1e.4xlarge": 4.668,<br>  "x1e.8xlarge": 9.336,<br>  "x1e.xlarge": 1.167,<br>  "z1d.12xlarge": 5.4,<br>  "z1d.2xlarge": 0.9,<br>  "z1d.3xlarge": 1.35,<br>  "z1d.6xlarge": 2.7,<br>  "z1d.large": 0.225,<br>  "z1d.metal": 5.4,<br>  "z1d.xlarge": 0.45<br>}</pre> | no |
| <a name="input_enable"></a> [enable](#input\_enable) | Destroy all module resources if false (optional). | `bool` | `false` | no |
| <a name="input_env"></a> [env](#input\_env) | The prefix for all environments [e.g. IPUMB, CORE, etc.] (required). | `string` | n/a | yes |
| <a name="input_iam"></a> [iam](#input\_iam) | n/a | <pre>object({<br>    name = optional(string)<br><br>    inline_policy_document = optional(string)<br><br>    policy_arns = optional(list(string))<br>  })</pre> | `null` | no |
| <a name="input_instance"></a> [instance](#input\_instance) | n/a | <pre>object({<br>    name = optional(string)<br><br>    enable_on_demand = optional(bool)<br><br>    block_duration_minutes          = optional(number) # 60, 120, 180, 240, 300, or 360<br>    instance_interruption_behaviour = optional(string) # Default is terminate<br>    launch_group                    = optional(string)<br>    spot_type                       = optional(string) # Default: persistent. one-time<br>    spot_price                      = optional(string) # Default: on-demand<br>    valid_from                      = optional(string) # UTC RFC3339 format YYYY-MM-DDTHH:MM:SSZ<br>    valid_until                     = optional(string) # UTC RFC3339 format YYYY-MM-DDTHH:MM:SSZ<br>    wait_for_fulfillment            = optional(bool)   # Default: false<br><br>    ami                         = string<br>    associate_public_ip_address = optional(bool)<br>    availability_zone           = optional(string)<br><br>    capacity_reservation_specification = optional(object({<br>      capacity_reservation_preference = optional(string) # "open" or "none". Default: "open"<br>      capacity_reservation_target = optional(object({<br>        capacity_reservation_id = optional(string)<br>      }))<br>    }))<br><br>    cpu_core_count          = optional(number)<br>    cpu_threads_per_core    = optional(number) #1-HT is disabled. Defaults-2<br>    cpu_credits             = optional(string) #standard or unlimited. by default: T3-unlimited, T2-standard<br>    disable_api_termination = optional(bool)<br><br>    #aws_ebs_volume and aws_volume_attachment<br>    #https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ebs_volume<br>    ebs_block_device = optional(list(object({<br>      device_name           = string<br>      delete_on_termination = optional(bool)<br>      encrypted             = optional(bool)<br>      iops                  = optional(number) # Only valid for volume_type of io1, io2 or gp3.<br>      kms_key_id            = optional(string)<br>      snapshot_id           = optional(string)<br>      throughput            = optional(number) # only valid for volume_type of gp3.<br>      volume_size           = optional(number) # GiB<br>      volume_type           = optional(string) # standard, gp2, gp3, io1, io2, sc1, st1. Defaults to gp2.<br>      tags                  = optional(map(string))<br>    })))<br><br>    ebs_optimized  = optional(bool)<br>    enable_enclave = optional(bool)<br><br>    ephemeral_block_device = optional(list(object({<br>      device_name    = string<br>      no_device_name = optional(bool)<br>      virtual_name   = optional(string) # e.g. ephemeral0<br>    })))<br><br>    get_password_data                    = optional(bool)<br>    hibernation                          = optional(bool)<br>    host_id                              = optional(string)<br>    iam_instance_profile                 = optional(string)<br>    instance_initiated_shutdown_behavior = optional(string) # stop and terminate<br>    instance_type                        = string<br>    ipv6_address_count                   = optional(number)<br>    ipv6_addresses                       = optional(list(string))<br><br>    key_name   = optional(string)<br>    public_key = optional(string)<br><br>    metadata_options = optional(object({<br>      http_endpoint               = optional(string) # enabled or disabled<br>      http_put_response_hop_limit = optional(number) # 1 to 64. Defaults to 1.<br>      http_tokens                 = optional(string) # optional or required. Defaults to optional<br>    }))<br><br>    enable_monitoring = optional(bool)<br><br>    network_interface = optional(list(object({<br>      device_index          = number<br>      network_interface_id  = string<br>      delete_on_termination = optional(bool) # Defaults to false<br>    })))<br><br>    placement_group = optional(string)<br>    private_ip      = optional(string)<br><br>    // "You can only modify the volume size, volume type, and Delete on<br>    // Termination flag on the block device mapping entry for the root<br>    // device volume."<br>    // https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/block-device-mapping-concepts.html<br>    root_block_device = optional(object({<br>      delete_on_termination = optional(bool)<br>      volume_size           = optional(number) # GiB<br>      volume_type           = optional(string) # standard, gp2, gp3, io1, io2, sc1, st1. Defaults to gp2.<br>    }))<br><br>    # A list of secondary private IPv4 addresses to assign to the instance's primary network interface (eth0) in a VPC. Can only be assigned to the primary network interface (eth0) attached at instance creation, not a pre-existing network interface i.e. referenced in a network_interface block. Refer to the Elastic network interfaces documentation to see the maximum number of private IP addresses allowed per instance type.<br>    secondary_private_ips = optional(list(string))<br>    security_groups       = optional(list(string))<br>    source_dest_check     = optional(bool) # Defaults true.<br><br>    subnet_id  = optional(string)<br>    subnet_ids = optional(list(string))<br><br>    tenancy                = optional(string) #Dedicated, Default,Host,<br>    user_data              = optional(string)<br>    user_data_base64       = optional(string)<br>    volume_tags            = optional(map(string))<br>    vpc_security_group_ids = optional(list(string))<br><br>    timeouts = optional(object({<br>      create = optional(string)<br>      update = optional(string)<br>      delete = optional(string)<br>    }))<br>  })</pre> | `null` | no |
| <a name="input_name"></a> [name](#input\_name) | (Optional) The component of tag-name | `string` | `""` | no |
| <a name="input_security_group"></a> [security\_group](#input\_security\_group) | n/a | <pre>object({<br>    name        = optional(string)<br>    description = optional(string)<br><br>    vpc_id                = optional(string)<br>    enable_rule_embedding = optional(bool)<br><br>    ingress = optional(list(string))<br>    egress  = optional(list(string))<br><br>    timeouts = optional(object({<br>      create = optional(string)<br>      delete = optional(string)<br>    }))<br>  })</pre> | `null` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | (Optional) A mapping of tags which should be assigned to all module resources | `map(string)` | `{}` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_enable"></a> [enable](#output\_enable) | ################ |
| <a name="output_env"></a> [env](#output\_env) | ############# |
| <a name="output_iam_role"></a> [iam\_role](#output\_iam\_role) | ################## |
| <a name="output_instance"></a> [instance](#output\_instance) | ################## |
| <a name="output_key_pair"></a> [key\_pair](#output\_key\_pair) | ################## |
<!-- END_TF_DOCS -->